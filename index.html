<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3DCG Designer Portfolio - Natorium_23</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons CDN -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        /* Interフォントの設定 */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        /* スムーズなスクロールをサポート */
        html {
            scroll-behavior: smooth;
        }
        /* カスタムスタイル: X/TwitterアイコンのSVGをLucideのTwitterアイコンで代用 */
        .lucide-twitter {
            /* Xのブランドカラーを模倣 */
            color: #111827; 
        }
        .x-button:hover .lucide-twitter {
             color: white;
        }

        /* アスペクト比を保ったまま画像を表示するためのヘルパー */
        .aspect-3-4 {
            aspect-ratio: 3 / 4;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div id="root"></div>

    <script>
        // Lucideアイコンの初期化（HTMLでの使用のため）
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        });

        // ReactコンポーネントのロジックをプレーンJavaScriptに変換して実装します

        const PROFILE_IMAGE_URL = 'https://pbs.twimg.com/profile_images/1940382517321777152/hEWt1GVI_400x400.jpg';

        const WORKS_DATA = [
            { 
                id: 1, 
                title: 'Vtuber Model "琴下ほうさく様"', 
                category: 'character', 
                image: 'https://lh3.googleusercontent.com/d/1m58USISuJp43eC2qJ-mY2UynaCR4VMPG', 
                imageTpose: 'https://lh3.googleusercontent.com/d/1WxBGw7NS6bweNckYlM3ItbBtrzgWrYEn', // 疑似Tポーズ画像
                description: '女性らしい体つきを意識して制作しました。VRM,VRChat用でのセットアップを行いました。',
                specs: ['MAYA', 'Unity', 'VRChat対応', 'パーフェクトシンク対応'],
                link: 'https://x.com/Natorium_23/status/1851931662336340312/video/1',
                isPlaceholder: false
            },
            { 
                id: 2, 
                title: 'VRChat Avatar "悠・akki様"', 
                category: 'character', 
                image: 'https://lh3.googleusercontent.com/d/1WOMPSwgrRxRU-36iFAU0JviF4JLEwkl6',
                imageTpose: 'https://lh3.googleusercontent.com/d/13Jb1Zk2O9tMymgkBIVw-nEI8_Fuv4XNu', // 疑似Tポーズ画像
                description: 'イメージ画像の雰囲気に合わせるのを意識いたしました。エフェクトによる腕の表現やアニメーションによる形状の変化など工夫を多く行いました。',
                specs: ['MAYA', 'Unity', ],
                link: '#',
                isPlaceholder: false
            },
            { 
                id: 3, 
                title: 'Vtuber Model "十五夜だんご様"', 
                category: 'character', 
                image: 'https://lh3.googleusercontent.com/d/1xPEviXfgEG8lKi-lzG4GEKwTFIkPuWGF',
                imageTpose: 'https://lh3.googleusercontent.com/d/1LpCWFj5-c5PfVMb-t2q771FXdQAdNReR', // 疑似Tポーズ画像
                description: '元気な印象のかわいい女の子を意識して制作しました。３面図の印象に合わせるためにテクスチャでの表現を強めに制作しました。',
                specs: ['MAYA', 'Unity', 'ZBrush', 'VRChat対応', 'パーフェクトシンク対応'],
                link: 'https://x.com/Natorium_23/status/1961594719147864253',
                isPlaceholder: false
            },
            { 
                id: 50, 
                title: 'Fan Model "星街すいせい様"', 
                category: 'fanmodel', 
                image: 'https://lh3.googleusercontent.com/d/1bNcSlUyhRScz_dpJrHvftbtcctxkV6EU',
                imageTpose: 'https://lh3.googleusercontent.com/d/15RsSK4TfSxjBBPybqWvrQDhPlNI2yeWC', // 疑似Tポーズ画像
                description: '学生のときに制作したモデルになります。',
                specs: ['MAYA', 'Unity', ],
                link: '#',
                isPlaceholder: false
            },
            {
                id: 99,
                title: 'Coming Soon...',
                category: 'others',
                image: 'https://placehold.co/400x533/E5E7EB/9CA3AF?text=Coming+Soon',
                imageTpose: null,
                description: '現在、その他のカテゴリの制作実績を準備中です。新しい作品が完成次第、公開いたします。',
                specs: [''],
                isPlaceholder: true,
                link: '#'
            }
        ];

        const pricingData = [
            { item: 'モデル1体 (Full Character)', price: '400,000', notes: 'Vtuber/VRChat向け フルモデル制作' },
            { item: '衣装のみ (Outfit Only)', price: '150,000', notes: '既存モデルへの衣装制作・調整' },
            { item: '髪の毛のみ (Hair Only)', price: '100,000', notes: 'ヘアスタイル制作・リギング' },
            { item: 'セットアップのみ (Setup Only)', price: '150,000', notes: 'リギング、ウェイト、表情設定など' },
        ];

        const optionalPricingData = [
            { item: 'パーフェクトシンク', price: '50,000', unit: '円', notes: '対応ソフトでより自然な表情追従を可能に' },
            { item: 'VRchat用への変換作業', price: '50,000', unit: '円', notes: 'VRchat向けに最適化、セットアップ' },
            { item: '実績非公開', price: '100,000', unit: '円', notes: 'ポートフォリオやSNSでの公開をしない場合' },
            { item: '追加表情 (1種につき)', price: '5,000', unit: '円/1種', notes: '指定表情の追加制作。基本表情は標準で含まれます' },
        ];

        const navLinks = [
            { name: 'About', id: 'about' },
            { name: 'Works', id: 'works' },
            { name: 'Price', id: 'price' }, 
            { name: 'Flow', id: 'flow' },
            { name: 'Contact', id: 'contact' },
        ];

        const workflowSteps = [
            {
                step: '01',
                title: 'ヒアリング・お見積り',
                desc: 'キャラクターのイメージ、三面図、使用用途（Vtuber/VRChat等）をお伺いし、制作期間と料金をご提案します。',
                icon: 'message-square'
            },
            {
                step: '02',
                title: 'ご契約・着手金',
                desc: '内容にご納得いただけましたら契約となります。着手金のお支払い確認後、制作スケジュールを確保いたします。',
                icon: 'check-circle'
            },
            {
                step: '03',
                title: 'モデリング・進捗確認',
                desc: '形状のラフ作成→本制作へと進めます。各段階（素体、衣装、髪など）でスクリーンショットによるチェックをお願いしています。',
                icon: 'box'
            },
            {
                step: '04',
                title: 'セットアップ・調整',
                desc: 'ボーン入れ、ウェイト調整、揺れもの設定、表情（フェイシャル）作成を行います。',
                icon: 'layers'
            },
            {
                step: '05',
                title: '最終確認・納品',
                desc: '実機（Unity/VRChat等）での動作確認動画をお送りします。問題なければVRM/UnityPackage形式で納品いたします。',
                icon: 'monitor'
            }
        ];
        
        const filterTabs = [
            { id: 'all', name: '全て' },
            { id: 'character', name: 'ご依頼制作' }, 
            { id: 'fanmodel', name: 'ファンモデル' },
            { id: 'others', name: 'その他' },
        ];

        // 料金をカンマ区切りにするヘルパー関数
        const formatPrice = (price) => {
            return price.replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1,');
        };

        // ====================================================================
        // Core State
        // ====================================================================
        let activeTab = 'all';
        let selectedWork = null;
        let isMenuOpen = false;
        // モーダル内で現在表示されている画像のキーを保持する新しい状態変数
        let activeModalImageKey = null; 

        // ====================================================================
        // Core Logic
        // ====================================================================

        const scrollToSection = (id) => {
            const element = document.getElementById(id);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth' });
                isMenuOpen = false;
                renderApp();
            }
        };

        const toggleMenu = () => {
            isMenuOpen = !isMenuOpen;
            renderApp();
        };

        const setActiveTab = (tabId) => {
            activeTab = tabId;
            renderApp();
        };

        const openModal = (work) => {
            if (!work.isPlaceholder) {
                selectedWork = work;
                // モーダルを開く際に、デフォルトでメイン画像を設定
                activeModalImageKey = 'main'; 
                renderApp();
            }
        };

        const closeModal = () => {
            selectedWork = null;
            activeModalImageKey = null; // モーダルを閉じるときに状態をリセット
            renderApp();
        };
        
        // モーダル内の画像を切り替える関数
        const setActiveModalImage = (key) => {
            activeModalImageKey = key;
            renderApp();
        };

        // ====================================================================
        // HTML Templates (JSXライクな構文)
        // ====================================================================

        const Header = () => `
            <header class="fixed top-4 inset-x-4 md:inset-x-8 bg-white/80 backdrop-blur-md border border-white/50 z-50 h-16 shadow-lg rounded-full flex items-center justify-between px-6 md:px-8 transition-all duration-300">
                <div class="text-xl font-black tracking-wider text-gray-900 flex items-center gap-2">
                    <div class="w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center">
                        <i data-lucide="box" class="text-white" style="width: 18px; height: 18px;"></i>
                    </div>
                    Natorium<span class="text-orange-500">_23</span>
                </div>
                
                <nav class="hidden md:flex space-x-2">
                    ${navLinks.map(link => `
                        <button 
                            onclick="scrollToSection('${link.id}')"
                            class="text-sm font-bold uppercase tracking-wider px-4 py-2 rounded-full hover:bg-orange-50 text-gray-600 hover:text-orange-500 transition-all"
                        >
                            ${link.name}
                        </button>
                    `).join('')}
                </nav>

                <button 
                    class="md:hidden text-gray-900 bg-orange-100 p-2 rounded-full hover:bg-orange-200 transition-colors shadow-sm"
                    onclick="toggleMenu()"
                >
                    <i data-lucide="${isMenuOpen ? 'x' : 'menu'}" style="width: 24px; height: 24px;"></i>
                </button>

                ${isMenuOpen ? `
                    <div class="absolute top-20 right-0 w-64 bg-white border border-gray-100 md:hidden shadow-xl rounded-2xl p-2">
                        <div class="flex flex-col space-y-1">
                            ${navLinks.map(link => `
                                <button 
                                    onclick="scrollToSection('${link.id}')"
                                    class="text-left text-sm font-bold uppercase tracking-widest py-3 px-4 hover:bg-orange-50 text-gray-700 rounded-xl transition-colors"
                                >
                                    ${link.name}
                                </button>
                            `).join('')}
                        </div>
                    </div>
                ` : ''}
            </header>
        `;

        const Hero = () => `
            <section class="relative z-10 min-h-screen flex flex-col justify-center items-center px-6 pt-32 pb-16">
                <div class="text-center max-w-4xl relative">
                    <div class="mx-auto mb-10 w-36 h-36 md:w-48 md:h-48 bg-orange-100 rounded-full flex items-center justify-center border-4 border-orange-300 shadow-xl">
                        <i data-lucide="user" class="text-orange-600" style="width: 80px; height: 80px;"></i>
                    </div>

                    <h2 class="text-gray-600 font-bold text-lg md:text-xl tracking-[0.1em] mb-4 uppercase">
                        3D Character & Avatar Design
                    </h2>
                    <h1 class="text-5xl md:text-7xl font-extrabold text-gray-900 mb-6 tracking-tighter leading-tight relative">
                        あなたの<span class="text-orange-500">３次元の夢</span>を形に
                    </h1>
                    <p class="text-gray-600 text-lg max-w-2xl mx-auto leading-relaxed mb-10 font-medium">
                        ハイクオリティなVtuberモデル、VRChatアバター制作をお手伝いします。
                        <br class="hidden md:block"/>
                        丁寧なモデリングと完璧なセットアップをお約束します。
                    </p>
                    
                    <div class="flex flex-col sm:flex-row gap-4 justify-center">
                        <button 
                            onclick="scrollToSection('works')"
                            class="group flex items-center justify-center gap-3 bg-gray-900 text-white px-8 py-3 rounded-full font-semibold text-lg hover:bg-gray-700 shadow-xl transition-all duration-300"
                        >
                            <span>制作実績を見る</span>
                            <i data-lucide="arrow-down" class="group-hover:translate-y-0.5 transition-transform" style="width: 20px; height: 20px;"></i>
                        </button>
                        <button 
                            onclick="scrollToSection('contact')"
                            class="flex items-center justify-center gap-2 text-gray-700 border border-gray-300 px-8 py-3 rounded-full font-semibold text-lg hover:bg-gray-100 transition-all duration-300"
                        >
                            <i data-lucide="mail" style="width: 20px; height: 20px;"></i>
                            <span>ご依頼・お問い合わせ</span>
                        </button>
                    </div>
                </div>
            </section>
        `;

        const About = () => `
            <section id="about" class="relative z-10 py-24 bg-white my-12 md:my-24 mx-4 md:mx-auto max-w-6xl rounded-[3rem] shadow-xl border border-white/50 px-8 md:px-16 overflow-hidden">
                <div class="absolute top-0 right-0 w-64 h-64 bg-orange-50 rounded-full -translate-y-1/2 translate-x-1/2 pointer-events-none"></div>
                <div class="relative">
                    <div class="flex flex-col md:flex-row gap-12 md:gap-16 items-center">
                        <div class="w-48 h-48 md:w-72 md:h-72 bg-orange-100 shrink-0 flex items-center justify-center rounded-full border-[6px] border-white shadow-xl overflow-hidden relative group">
                            <img 
                                src="${PROFILE_IMAGE_URL}" 
                                alt="Natorium_23 Profile" 
                                class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" 
                                onerror="this.onerror=null; this.src='https://placehold.co/400x400/EF4444/ffffff?text=Image+Error';"
                            />
                        </div>
                        
                        <div class="flex-1">
                            <div class="flex items-center gap-4 mb-8">
                                <div class="h-2 w-12 bg-orange-500 rounded-full"></div>
                                <h3 class="text-4xl font-black text-gray-900">ABOUT ME</h3>
                            </div>
                            <p class="text-gray-600 leading-loose mb-10 font-medium text-lg">
                                フリーランスの3DCGデザイナーとして活動しています。<br/>
                                主にBlenderやUnityを使用し、Vtuberモデルの制作からVRChat向けアバターのセットアップまで幅広く対応可能です。
                                キャラクターの魅力を最大限に引き出す「かわいい」「かっこいい」造形と、破綻のない丁寧なリギングを心がけています。
                            </p>
                            
                            <div class="grid grid-cols-1 gap-6 text-gray-600">
                                <div class="bg-orange-50/80 p-6 rounded-3xl border border-orange-100 shadow-sm">
                                    <span class="block text-orange-600 font-black text-sm uppercase mb-3 flex items-center gap-2">
                                        <i data-lucide="monitor" style="width: 16px; height: 16px;"></i> Main Tools
                                    </span>
                                    <span class="font-bold text-gray-800 text-lg leading-snug block">Blender, Unity,<br/>Substance Painter, Photoshop</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        `;

        const Works = () => `
            <section id="works" class="relative z-10 py-24 px-6 max-w-6xl mx-auto">
                <div class="flex flex-col items-center mb-16">
                    <h3 class="text-5xl font-black text-gray-900 mb-10 text-center relative inline-block">
                        WORKS
                        <span class="absolute -bottom-3 left-1/2 -translate-x-1/2 w-24 h-2 bg-orange-500 rounded-full"></span>
                    </h3>
                    
                    <div class="flex flex-wrap justify-center gap-3 bg-white p-2 rounded-full shadow-md border border-gray-100">
                        ${filterTabs.map(tab => `
                            <button
                                onclick="setActiveTab('${tab.id}')"
                                class="px-8 py-3 text-sm font-bold uppercase tracking-wider rounded-full transition-all ${
                                    activeTab === tab.id
                                        ? 'bg-orange-500 text-white shadow-md' 
                                        : 'text-gray-600 hover:bg-orange-50 hover:text-orange-600'
                                }"
                            >
                                ${tab.name}
                            </button>
                        `).join('')}
                    </div>
                </div>

                <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6 md:gap-8">
                    ${WORKS_DATA.filter(work => activeTab === 'all' || work.category === activeTab).map(work => `
                        <div 
                            onclick="openModal(${work.isPlaceholder ? 'null' : 'WORKS_DATA.find(w => w.id === ' + work.id + ')'})" 
                            class="group relative aspect-3-4 bg-white rounded-[2rem] overflow-hidden shadow-lg transition-all duration-300 border border-white/50 ${
                                work.isPlaceholder 
                                    ? 'cursor-default bg-gray-50'
                                    : 'cursor-pointer hover:shadow-2xl hover:-translate-y-2'
                            }"
                        >
                            <img 
                                src="${work.image}" 
                                alt="${work.title}" 
                                class="w-full h-full object-cover transition-transform duration-500 ${
                                    work.isPlaceholder ? 'opacity-50' : 'group-hover:scale-110 group-hover:rotate-1'
                                }"
                                onerror="this.onerror=null; this.src='https://placehold.co/400x533/EF4444/ffffff?text=Image+Error';"
                            />
                            
                            ${work.isPlaceholder ? `
                                <div class="absolute inset-0 flex flex-col items-center justify-center p-8 text-gray-500">
                                    <i data-lucide="clock" class="text-gray-400 mb-4" style="width: 48px; height: 48px;"></i>
                                    <h4 class="text-2xl font-black text-gray-600">${work.title}</h4>
                                    <p class="text-center text-sm mt-2">実績追加までしばらくお待ちください</p>
                                </div>
                            ` : `
                                <div class="absolute inset-0 bg-gradient-to-t from-gray-900/80 via-gray-900/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                                <div class="absolute bottom-0 left-0 w-full p-6 translate-y-8 group-hover:translate-y-0 transition-transform duration-500 ease-out">
                                    <span class="text-xs font-bold bg-white text-orange-500 px-3 py-1 mb-2 inline-block rounded-full uppercase shadow-sm tracking-wider">
                                        ${filterTabs.find(t => t.id === work.category)?.name || work.category}
                                    </span>
                                    <h4 class="text-xl font-black text-white drop-shadow-md">${work.title}</h4>
                                </div>
                                <div class="absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300 delay-100 scale-50 group-hover:scale-100">
                                    <div class="bg-white/30 backdrop-blur-md p-3 rounded-full shadow-sm hover:bg-white/50 transition-colors">
                                        <i data-lucide="external-link" class="text-white" style="width: 20px; height: 20px;"></i>
                                    </div>
                                </div>
                            `}
                        </div>
                    `).join('')}
                </div>
            </section>
        `;

        const Price = () => `
            <section id="price" class="relative z-10 py-24 bg-white my-12 md:my-24 mx-4 md:mx-auto max-w-6xl rounded-[3rem] shadow-xl border border-white/50 px-8 md:px-16 overflow-hidden">
                <div class="relative">
                    <div class="text-center mb-16">
                        <h3 class="text-5xl font-black text-gray-900 mb-4 relative inline-block">
                            PRICE
                            <span class="absolute -bottom-3 left-0 w-full h-2 bg-orange-500 rounded-full"></span>
                        </h3>
                        <p class="text-gray-600 mt-6 font-medium text-lg flex items-center justify-center gap-2">
                            <i data-lucide="dollar-sign" class="text-orange-500" style="width: 20px; height: 20px;"></i> 制作費用目安 (全て**税別**表示です)
                        </p>
                    </div>

                    <h4 class="text-2xl font-black text-gray-900 mb-6 border-b pb-2 border-orange-200 flex items-center gap-2">
                        <span class="text-orange-500">I.</span> ベース制作プラン
                    </h4>
                    <div class="space-y-6 max-w-3xl mx-auto mb-16">
                        ${pricingData.map(item => `
                            <div class="flex flex-col md:flex-row items-start md:items-center justify-between p-6 bg-gray-50 rounded-2xl border-l-4 border-orange-500 shadow-md transition-shadow hover:shadow-lg">
                                <div class="text-left mb-2 md:mb-0">
                                    <h4 class="text-xl font-bold text-gray-800">${item.item}</h4>
                                    <p class="text-sm text-gray-500 mt-1">${item.notes}</p>
                                </div>
                                <div class="text-right shrink-0">
                                    <p class="text-3xl font-black text-orange-600">
                                        ${formatPrice(item.price)}円〜
                                    </p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    
                    <h4 class="text-2xl font-black text-gray-900 mb-6 border-b pb-2 border-orange-200 flex items-center gap-2">
                        <span class="text-orange-500">II.</span> 追加オプション代
                    </h4>
                    <div class="space-y-6 max-w-3xl mx-auto">
                        ${optionalPricingData.map(item => `
                            <div class="flex flex-col md:flex-row items-start md:items-center justify-between p-6 bg-orange-50 rounded-2xl border-l-4 border-pink-500 shadow-md transition-shadow hover:shadow-lg">
                                <div class="text-left mb-2 md:mb-0">
                                    <h4 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                                        <i data-lucide="plus-circle" class="text-pink-500" style="width: 20px; height: 20px;"></i>
                                        ${item.item}
                                    </h4>
                                    <p class="text-sm text-gray-500 mt-1">${item.notes}</p>
                                </div>
                                <div class="text-right shrink-0">
                                    <p class="text-3xl font-black text-pink-600">
                                        ${formatPrice(item.price)}${item.unit}
                                    </p>
                                </div>
                            </div>
                        `).join('')}
                    </div>

                    <div class="mt-12 text-center text-gray-500 text-sm italic">
                        <p>* 上記は目安の料金です。デザインの複雑さ、パーツ数、リギングの精度により変動します。</p>
                        <p>* 詳細なご依頼内容に基づき、個別にお見積りを作成いたしますので、まずはお問い合わせください。</p>
                    </div>
                </div>
            </section>
        `;

        const Flow = () => `
            <section id="flow" class="relative z-10 py-24 bg-gradient-to-b from-orange-50 to-white my-12 md:my-24 mx-4 md:mx-auto max-w-6xl rounded-[3rem] border border-orange-100/50 shadow-xl px-8 md:px-16 overflow-hidden">
                <div class="absolute top-0 left-0 w-96 h-96 bg-orange-200/40 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2 pointer-events-none"></div>
                <div class="absolute bottom-0 right-0 w-96 h-96 bg-pink-200/40 rounded-full blur-3xl translate-x-1/2 translate-y-1/2 pointer-events-none"></div>

                <div class="relative">
                    <div class="text-center mb-20">
                        <h3 class="text-5xl font-black text-gray-900 mb-4 relative inline-block">
                            WORKFLOW
                            <span class="absolute -bottom-3 left-0 w-full h-2 bg-orange-500 rounded-full"></span>
                        </h3>
                        <p class="text-gray-600 mt-6 font-medium text-lg">ご依頼から納品までの楽しい道のり</p>
                    </div>

                    <div class="relative">
                        <div class="absolute left-8 md:left-1/2 top-0 bottom-0 w-2 bg-orange-100 rounded-full -ml-1 hidden md:block"></div>
                        <div class="absolute left-8 top-0 bottom-0 w-2 bg-orange-100 rounded-full -ml-1 md:hidden"></div>

                        <div class="space-y-16 md:space-y-24 py-8">
                            ${workflowSteps.map((item, index) => `
                                <div class="relative flex flex-col md:flex-row gap-8 items-center ${
                                    index % 2 === 0 ? 'md:flex-row-reverse' : ''
                                }">
                                    <div class="absolute left-8 md:left-1/2 -translate-x-1/2 w-20 h-20 bg-gradient-to-br from-orange-400 to-pink-500 border-[6px] border-white shadow-lg flex items-center justify-center rounded-full z-10 shrink-0">
                                        <i data-lucide="${item.icon}" class="text-white drop-shadow-sm" style="width: 24px; height: 24px;"></i>
                                    </div>
                                    <div class="w-full md:w-[calc(50%-4rem)] pl-24 md:pl-0 ${
                                        index % 2 === 0 ? 'md:text-left' : 'md:text-right'
                                    }">
                                        <div class="bg-white p-10 rounded-[2.5rem] border border-gray-100 shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 relative group">
                                            <span class="absolute -top-8 text-7xl font-black text-orange-100/80 select-none group-hover:text-orange-200/80 transition-colors ${
                                                index % 2 === 0 ? 'left-10' : 'right-10'
                                            }">${item.step}</span>
                                            <div class="flex flex-col relative z-10 ${
                                                index % 2 === 0 ? 'md:items-start' : 'md:items-end'
                                            }">
                                                <h4 class="text-3xl font-black text-gray-900 mb-4">${item.title}</h4>
                                                <p class="text-gray-600 text-base leading-relaxed font-medium">
                                                    ${item.desc}
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="hidden md:block w-[calc(50%-4rem)]"></div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            </section>
        `;

        const Contact = () => `
            <section id="contact" class="relative z-10 py-24 px-6 max-w-5xl mx-auto text-center">
                <h3 class="text-5xl font-black text-gray-900 mb-10 relative inline-block">
                    CONTACT
                    <span class="absolute -bottom-3 left-1/2 -translate-x-1/2 w-24 h-2 bg-orange-500 rounded-full"></span>
                </h3>
                <p class="text-gray-600 mb-16 leading-relaxed font-medium text-xl max-w-3xl mx-auto">
                    制作のご依頼、お見積り、ご相談などお気軽にご連絡ください。<br/>
                    ワクワクするようなプロジェクトをお待ちしています！
                </p>

                <div class="grid grid-cols-1 sm:grid-cols-2 gap-8 max-w-4xl mx-auto mb-20">
                    <!-- X (旧Twitter) -->
                    <a href="https://x.com/Natorium_23" target="_blank" rel="noopener noreferrer" class="x-button flex flex-col items-center justify-center p-10 bg-white rounded-[2.5rem] border border-gray-100 shadow-lg hover:shadow-xl hover:-translate-y-2 group transition-all duration-300 relative overflow-hidden">
                        <div class="absolute inset-0 bg-gradient-to-br from-gray-900/0 to-gray-900/0 group-hover:from-gray-900/10 group-hover:to-white transition-all duration-300"></div>
                        <div class="bg-gray-100 p-5 rounded-full mb-6 group-hover:bg-gray-900 group-hover:scale-110 transition-all shadow-sm relative z-10">
                            <i data-lucide="twitter" class="lucide-twitter group-hover:text-white transition-colors" style="width: 40px; height: 40px;"></i>
                        </div>
                        <span class="font-black text-xl text-gray-900 relative z-10">X</span>
                        <span class="text-base text-gray-500 mt-2 font-medium relative z-10">@Natorium_23 / DM Open</span>
                    </a>

                    <!-- Email -->
                    <a href="mailto:natorium23cg@gmail.com" class="flex flex-col items-center justify-center p-10 bg-white rounded-[2.5rem] border border-gray-100 shadow-lg hover:shadow-xl hover:-translate-y-2 group transition-all duration-300 relative overflow-hidden">
                        <div class="absolute inset-0 bg-gradient-to-br from-orange-500/0 to-orange-500/0 group-hover:from-orange-500/10 group-hover:to-white transition-all duration-300"></div>
                        <div class="bg-orange-50 p-5 rounded-full mb-6 group-hover:bg-orange-500 group-hover:scale-110 transition-all shadow-sm relative z-10">
                            <i data-lucide="mail" class="text-orange-500 group-hover:text-white transition-colors" style="width: 40px; height: 40px;"></i>
                        </div>
                        <span class="font-black text-xl text-gray-900 relative z-10">Email</span>
                        <span class="text-base text-gray-500 mt-2 font-medium relative z-10">natorium23cg@gmail.com</span>
                    </a>
                </div>
                
                <div class="bg-white p-10 md:p-16 rounded-[3rem] border border-gray-100 text-left max-w-4xl mx-auto shadow-xl relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-64 h-64 bg-orange-50 rounded-full -translate-y-1/2 translate-x-1/2 pointer-events-none"></div>
                    <div class="relative z-10">
                        <h4 class="text-gray-900 font-black mb-8 text-2xl flex items-center gap-3">
                            <span class="bg-orange-500 w-3 h-10 rounded-full block shadow-sm"></span>
                            ご依頼テンプレート
                        </h4>
                        <!-- テンプレート内の不要な空行を削除しました -->
                        <pre class="whitespace-pre-wrap text-sm md:text-base bg-gray-50 p-6 rounded-xl border border-gray-200 text-gray-700 leading-relaxed">
■ ご希望モデルの種類 (Vtuber/VRChatアバター/その他):
■ キャラクター概要 (既存デザインがある場合はURLや画像添付):
■ 使用用途 (配信/VRChat/ゲーム開発など):
■ 納品希望形式 (VRM/UnityPackage/FBXなど):
■ 予算感 (可能な範囲でご記入ください):
■ 納期希望日:
■ その他ご要望:
                        </pre>
                        <p class="text-sm text-gray-500 mt-6 italic">
                            上記テンプレートをコピーし、DMまたはメールにてご連絡いただけるとスムーズです。
                        </p>
                    </div>
                </div>
            </section>
        `;

        const Footer = () => `
            <footer class="py-12 bg-gray-900 text-white text-center text-sm">
                <div class="max-w-6xl mx-auto px-6">
                    <div class="flex justify-center space-x-6 mb-6">
                        <a href="https://x.com/Natorium_23" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-orange-500 transition-colors">
                            <i data-lucide="twitter" class="lucide-twitter text-gray-400 hover:text-orange-500 transition-colors" style="width: 20px; height: 20px;"></i>
                        </a>
                        <a href="mailto:natorium23cg@gmail.com" class="text-gray-400 hover:text-orange-500 transition-colors">
                            <i data-lucide="mail" style="width: 20px; height: 20px;"></i>
                        </a>
                    </div>
                    <p class="text-gray-500">&copy; 2024 Natorium_23. All rights reserved.</p>
                </div>
            </footer>
        `;

        const WorkModal = (work) => {
            if (!work) return '';

            // 画像マップを動的に作成
            const imageMap = [
                { 
                    src: work.image, 
                    alt: `${work.title} メインビジュアル`, 
                    label: 'メインビジュアル',
                    key: 'main'
                },
            ];

            // T-pose画像があれば追加
            if (work.imageTpose) {
                imageMap.push({
                    src: work.imageTpose, 
                    alt: `${work.title} Tポーズ`, 
                    label: 'Tポーズ (リギング確認用)',
                    key: 'tpose'
                });
            }

            // 現在アクティブな画像キーを取得。未設定なら最初の画像キー('main')を使用。
            const currentImageKey = activeModalImageKey || 'main';
            const currentImage = imageMap.find(i => i.key === currentImageKey) || imageMap[0];

            return `
                <div 
                    id="work-modal"
                    class="fixed inset-0 z-[100] bg-gray-900 bg-opacity-70 flex items-center justify-center p-4 overflow-y-auto"
                    onclick="closeModal()" 
                >
                    <div 
                        class="bg-white rounded-3xl w-full max-w-6xl max-h-[95vh] overflow-y-auto shadow-2xl transform transition-all duration-300 scale-100 opacity-100"
                        onclick="event.stopPropagation()"
                    >
                        <div class="flex flex-col lg:flex-row h-full">
                            
                            <!-- 1. 左側: 画像ギャラリー -->
                            <div class="w-full lg:w-3/4 shrink-0 bg-gray-100 relative rounded-t-3xl lg:rounded-l-3xl lg:rounded-tr-none overflow-hidden p-6 flex flex-col items-center justify-start">
                                
                                <button 
                                    onclick="closeModal()"
                                    class="absolute top-4 right-4 bg-gray-900/50 hover:bg-gray-900 p-2 rounded-full text-white transition-colors z-20"
                                >
                                    <i data-lucide="x" style="width: 24px; height: 24px;"></i>
                                </button>
                                
                                <div class="w-full bg-gray-200 rounded-xl overflow-hidden flex-shrink-0 mb-4 flex items-center justify-center" style="max-height: 80%;">
                                    <img 
                                        src="${currentImage.src}" 
                                        alt="${currentImage.alt}" 
                                        class="w-full h-full object-cover p-4 transition-opacity duration-300"
                                        onerror="this.onerror=null; this.src='https://placehold.co/1000x1500/EF4444/ffffff?text=Image+Error';"
                                    />
                                </div>

                                <!-- サムネイルエリア (画像切り替えロジックを追加) -->
                                <div class="flex-shrink-0 w-full flex space-x-4 justify-center">
                                    ${imageMap.map(data => `
                                        <div
                                            onclick="setActiveModalImage('${data.key}')" 
                                            class="w-24 h-24 sm:w-32 sm:h-32 bg-gray-300 rounded-lg overflow-hidden cursor-pointer transition-all duration-200 border-4 ${
                                                data.key === currentImageKey ? 'border-orange-500 opacity-100' : 'border-gray-300 opacity-70 hover:opacity-100'
                                            }"
                                        >
                                            <img 
                                                src="${data.src}" 
                                                alt="${data.alt}" 
                                                class="w-full h-full object-cover"
                                                onerror="this.onerror=null; this.src='https://placehold.co/100x100/EF4444/ffffff?text=X';"
                                            />
                                        </div>
                                    `).join('')}
                                </div>

                            </div>

                            <!-- 2. 右側: 詳細情報 -->
                            <div class="w-full lg:w-1/4 flex flex-col p-8 lg:p-12">
                                <span class="text-sm font-bold bg-orange-100 text-orange-600 px-4 py-1 mb-3 inline-block rounded-full uppercase tracking-wider">
                                    ${filterTabs.find(t => t.id === work.category)?.name || work.category}
                                </span>
                                <h2 class="text-4xl font-black text-gray-900 mb-6">${work.title}</h2>
                                
                                <p class="text-gray-700 text-lg leading-relaxed mb-8 border-b pb-6">
                                    ${work.description}
                                </p>

                                <h4 class="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                                    <i data-lucide="tag" class="text-orange-500" style="width: 20px; height: 20px;"></i> 技術・仕様
                                </h4>
                                <div class="flex flex-wrap gap-2 mb-8">
                                    ${work.specs.map(spec => `
                                        <span class="bg-gray-100 text-gray-700 text-sm font-medium px-4 py-1.5 rounded-full shadow-sm">
                                            ${spec}
                                        </span>
                                    `).join('')}
                                </div>

                                ${work.link && work.link !== '#' ? `
                                    <div class="pt-6 border-t">
                                        <a 
                                            href="${work.link}" 
                                            target="_blank" 
                                            rel="noopener noreferrer"
                                            class="inline-flex items-center gap-2 text-white bg-orange-500 hover:bg-orange-600 px-6 py-3 rounded-full font-semibold transition-colors shadow-md"
                                        >
                                            関連リンクを見る
                                            <i data-lucide="external-link" style="width: 20px; height: 20px;"></i>
                                        </a>
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        };

        // ====================================================================
        // Main Render Function
        // ====================================================================

        const renderApp = () => {
            const app = document.getElementById('root');
            if (!app) return;

            app.innerHTML = `
                <div class="min-h-screen relative">
                    
                    <!-- 背景パターン -->
                    <div class="fixed inset-0 z-0 opacity-30 pointer-events-none" 
                        style="background-image: radial-gradient(#fdba74 1px, transparent 1px); background-size: 24px 24px;">
                    </div>
                    
                    <!-- 装飾用の大きな円 -->
                    <div class="fixed top-[-20%] right-[-10%] w-[600px] h-[600px] bg-orange-100 rounded-full blur-3xl opacity-50 pointer-events-none z-0"></div>
                    <div class="fixed bottom-[-20%] left-[-10%] w-[600px] h-[600px] bg-blue-100 rounded-full blur-3xl opacity-50 pointer-events-none z-0"></div>

                    ${Header()}
                    ${Hero()}
                    ${About()}
                    ${Works()}
                    ${Price()}
                    ${Flow()}
                    ${Contact()}
                    ${Footer()}
                </div>
                ${WorkModal(selectedWork)}
            `;

            // Lucideアイコンを再作成
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        };

        // 初期描画
        document.addEventListener('DOMContentLoaded', renderApp);
    </script>
</body>
</html>
