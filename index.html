<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3DCGデザイナーポートフォリオ - Natorium_23</title>
    <!-- Tailwind CSS CDN --><script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons CDN --><script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        /* Interフォントの設定 */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        /* スムーズなスクロールをサポート */
        html {
            scroll-behavior: smooth;
        }
        /* カスタムスタイル: X/TwitterアイコンのSVGをLucideのTwitterアイコンで代用 */
        .lucide-twitter {
            /* Xのブランドカラーを模倣 */
            color: #111827; 
        }
        .x-button:hover .lucide-twitter {
             color: white;
        }

        /* アスペクト比を保ったまま画像を表示するためのヘルパー */
        .aspect-3-4 {
            aspect-ratio: 3 / 4;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div id="root"></div>

    <script>
        // Lucideアイコンの初期化（HTMLでの使用のため）
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        });

        // ====================================================================
        // 定数データ
        // ====================================================================

        const PROFILE_IMAGE_URL = 'https://pbs.twimg.com/profile_images/1940382517321777152/hEWt1GVI_400x400.jpg';

        const WORKS_DATA = [
            { 
                id: 1, 
                title: 'Vtuber Model "KANA"', 
                category: 'character', 
                image: 'https://placehold.co/400x533/FF6961/ffffff?text=KANA+Model', // 変更: 赤系
                imageTpose: 'https://placehold.co/400x533/FF7F50/ffffff?text=KANA+T-Pose', 
                description: '明るく元気な印象のVtuberモデルです。テクスチャの描き込みにこだわり、衣装差分2種、パーフェクトシンク対応で制作しました。',
                specs: ['Blender', 'Unity', 'VRChat対応', '表情モーフ50種'],
                link: 'https://youtube.com',
                isPlaceholder: false
            },
            { 
                id: 2, 
                title: 'VRChat Avatar "CYBER"', 
                category: 'character', 
                image: 'https://placehold.co/400x533/32A1C3/ffffff?text=CYBER+Avatar', // 変更: 青系
                imageTpose: 'https://placehold.co/400x533/00BFFF/ffffff?text=CYBER+T-Pose', 
                description: 'サイバーパンクな世界観を持つVRChat向けアバター。ギミックを多数組み込み、フルトラッキングでの動作安定性を重視しました。',
                specs: ['Blender', 'Unity', 'フルスクラッチ', '軽量化済'],
                link: 'https://vrchat.com',
                isPlaceholder: false
            },
            { 
                id: 5, 
                title: 'Original Character', 
                category: 'character', 
                image: 'https://placehold.co/400x533/8FD14F/ffffff?text=Original+Character', // 変更: 緑系
                imageTpose: 'https://placehold.co/400x533/90EE90/ffffff?text=Original+T-Pose', 
                description: 'ポートフォリオ用に制作したオリジナルキャラクター。可愛らしいデフォルメと独特なシェーディングが特徴です。',
                specs: ['Blender', 'ZBrush', 'トゥーンシェーダー'],
                link: '#',
                isPlaceholder: false
            },
            { 
                id: 7, 
                title: 'Fan Model "RURU"', 
                category: 'fanmodel', 
                image: 'https://placehold.co/400x533/9F55D7/ffffff?text=RURU+Fan+Model', // 変更: 紫系
                imageTpose: 'https://placehold.co/400x533/FFA07A/ffffff?text=RURU+T-Pose', 
                description: '人気キャラクターのファンモデルを制作。オリジナルのデザインを尊重しつつ、モデリングの技術力をアピールするために制作しました。',
                specs: ['Blender', 'テクスチャ調整', '非営利目的'],
                link: '#',
                isPlaceholder: false
            },
            { 
                id: 8, 
                title: 'Fan Model "JIN"', 
                category: 'fanmodel', 
                image: 'https://placehold.co/400x533/7B8D9E/ffffff?text=JIN+Fan+Model', // 変更: グレー系
                imageTpose: 'https://placehold.co/400x533/20B2AA/ffffff?text=JIN+T-Pose', 
                description: 'メカデザインのファンモデル。複雑なパーツ構成と硬質な質感を再現することに挑戦しました。',
                specs: ['Blender', 'ハードサーフェス', '複雑なリギング'],
                link: '#',
                isPlaceholder: false
            },
            {
                id: 99,
                title: 'Coming Soon...',
                category: 'others',
                image: 'https://placehold.co/400x533/E5E7EB/9CA3AF?text=Coming+Soon',
                imageTpose: null,
                description: '現在、その他のカテゴリの制作実績を準備中です。新しい作品が完成次第、公開いたします。',
                specs: [''],
                isPlaceholder: true,
                link: '#'
            }
        ];

        const pricingData = [
            { item: 'モデル1体 (Full Character)', price: '400,000', notes: 'Vtuber/VRChat向け フルモデル制作' },
            { item: '衣装のみ (Outfit Only)', price: '150,000', notes: '既存モデルへの衣装制作・調整' },
            { item: '髪の毛のみ (Hair Only)', price: '100,000', notes: 'ヘアスタイル制作・リギング' },
            { item: 'セットアップのみ (Setup Only)', price: '150,000', notes: 'リギング、ウェイト、表情設定など' },
        ];

        const optionalPricingData = [
            { item: 'パーフェクトシンク', price: '50,000', unit: '円', notes: '対応ソフトでより自然な表情追従を可能に' },
            { item: 'VRchat用への変換作業', price: '50,000', unit: '円', notes: 'VRchat向けに最適化、セットアップ' },
            { item: '実績非公開', price: '100,000', unit: '円', notes: 'ポートフォリオやSNSでの公開をしない場合' },
            { item: '追加表情 (1種につき)', price: '5,000', unit: '円/1種', notes: '指定表情の追加制作。基本表情は標準で含まれます' },
        ];

        const navLinks = [
            { name: 'About', id: 'about' },
            { name: 'Works', id: 'works' },
            { name: 'Price', id: 'price' }, 
            { name: 'Flow', id: 'flow' },
            { name: 'Contact', id: 'contact' },
        ];

        const workflowSteps = [
            {
                step: '01',
                title: 'ヒアリング・お見積り',
                desc: 'キャラクターのイメージ、三面図、使用用途（Vtuber/VRChat等）をお伺いし、制作期間と料金をご提案します。',
                icon: 'message-square'
            },
            {
                step: '02',
                title: 'ご契約・着手金',
                desc: '内容にご納得いただけましたら契約となります。着手金のお支払い確認後、制作スケジュールを確保いたします。',
                icon: 'check-circle'
            },
            {
                step: '03',
                title: 'モデリング・進捗確認',
                desc: '形状のラフ作成→本制作へと進めます。各段階（素体、衣装、髪など）でスクリーンショットによるチェックをお願いしています。',
                icon: 'box'
            },
            {
                step: '04',
                title: 'セットアップ・調整',
                desc: 'ボーン入れ、ウェイト調整、揺れもの設定、表情（フェイシャル）作成を行います。',
                icon: 'layers'
            },
            {
                step: '05',
                title: '最終確認・納品',
                desc: '実機（Unity/VRChat等）での動作確認動画をお送りします。問題なければVRM/UnityPackage形式で納品いたします。',
                icon: 'monitor'
            }
        ];
        
        const filterTabs = [
            { id: 'all', name: '全て' },
            { id: 'character', name: 'ご依頼制作' }, 
            { id: 'fanmodel', name: 'ファンモデル' },
            { id: 'others', name: 'その他' },
        ];
        
        const INQUIRY_OPTIONS = [
            { value: '依頼_新規フルモデル制作', label: '新規フルモデル制作（Vtuber/VRChat）' },
            { value: '依頼_衣装・パーツ制作', label: '衣装・パーツ等の部分制作・追加' },
            { value: '質問_料金・納期について', label: '料金・納期に関するご質問' },
            { value: '質問_技術的な相談', label: '技術的なご相談・互換性について' },
            { value: 'その他', label: 'その他' }
        ];

        // 料金をカンマ区切りにするヘルパー関数
        const formatPrice = (price) => {
            return price.replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1,');
        };

        // ====================================================================
        // Core State
        // ====================================================================
        let activeTab = 'all';
        let selectedWork = null;
        let isMenuOpen = false;
        let activeModalImageKey = null; 
        let contactMessage = { text: '', type: '' }; // { text: string, type: 'success' | 'error' }

        // ====================================================================
        // Core Logic (UI Navigation)
        // ====================================================================

        const scrollToSection = (id) => {
            const element = document.getElementById(id);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth' });
                isMenuOpen = false;
                renderApp();
            }
        };

        const toggleMenu = () => {
            isMenuOpen = !isMenuOpen;
            renderApp();
        };

        const setActiveTab = (tabId) => {
            activeTab = tabId;
            renderApp();
        };

        const openModal = (work) => {
            if (!work.isPlaceholder) {
                selectedWork = work;
                activeModalImageKey = 'main'; 
                renderApp();
            }
        };

        const closeModal = () => {
            selectedWork = null;
            activeModalImageKey = null; // モーダルを閉じるときに状態をリセット
            renderApp();
        };
        
        const setActiveModalImage = (key) => {
            activeModalImageKey = key;
            renderApp();
        };

        // ====================================================================
        // Form & Message Logic
        // ====================================================================

        // メッセージを表示する関数 (stateを更新して再描画)
        function showMessage(message, type) {
            contactMessage = { text: message, type: type };
            renderApp();

            // 5秒後にメッセージを非表示にする
            setTimeout(() => {
                contactMessage = { text: '', type: '' };
                renderApp();
            }, 5000);
        }

        // フォーム送信を処理する関数
        function handleSubmit(event) {
            // フォームのデフォルトの送信動作をキャンセル
            event.preventDefault();

            // フォーム要素からデータを取得 (DOMから直接取得)
            const form = document.getElementById('contactForm');
            if (!form) return;

            const name = form.querySelector('#name').value.trim();
            const email = form.querySelector('#email').value.trim();
            const inquiryType = form.querySelector('#inquiryType').value.trim();
            const details = form.querySelector('#details').value.trim();
            
            // 必須フィールドの検証
            if (!name || !email || inquiryType === '' || details === '') {
                showMessage('全ての必須項目を入力してください。', 'error');
                return;
            }

            // ここで、通常はAPIエンドポイントにデータをPOSTします。
            // 今回はシミュレーションとしてコンソールに表示します。
            console.log("--- お問い合わせ内容 (送信シミュレーション) ---");
            console.log("お名前:", name);
            console.log("メールアドレス:", email);
            console.log("選択されたお問い合わせ種別:", inquiryType);
            console.log("詳細内容:", details);
            console.log("---------------------------------------");

            // 送信完了メッセージを表示
            showMessage('お問い合わせを送信しました。内容を確認後、担当者よりご連絡いたします。', 'success');

            // フォームをリセット
            form.reset();
        }

        // ====================================================================
        // HTML Templates (JSXライクな構文)
        // ====================================================================

        const Header = () => `
            <header class="fixed top-4 inset-x-4 md:inset-x-8 bg-white/80 backdrop-blur-md border border-white/50 z-50 h-16 shadow-lg rounded-full flex items-center justify-between px-6 md:px-8 transition-all duration-300">
                <div class="text-xl font-black tracking-wider text-gray-900 flex items-center gap-2">
                    <div class="w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center">
                        <i data-lucide="box" class="text-white" style="width: 18px; height: 18px;"></i>
                    </div>
                    Natorium<span class="text-orange-500">_23</span>
                </div>
                
                <nav class="hidden md:flex space-x-2">
                    ${navLinks.map(link => `
                        <button 
                            onclick="scrollToSection('${link.id}')"
                            class="text-sm font-bold uppercase tracking-wider px-4 py-2 rounded-full hover:bg-orange-50 text-gray-600 hover:text-orange-500 transition-all"
                        >
                            ${link.name}
                        </button>
                    `).join('')}
                </nav>

                <button 
                    class="md:hidden text-gray-900 bg-orange-100 p-2 rounded-full hover:bg-orange-200 transition-colors shadow-sm"
                    onclick="toggleMenu()"
                >
                    <i data-lucide="${isMenuOpen ? 'x' : 'menu'}" style="width: 24px; height: 24px;"></i>
                </button>

                ${isMenuOpen ? `
                    <div class="absolute top-20 right-0 w-64 bg-white border border-gray-100 md:hidden shadow-xl rounded-2xl p-2">
                        <div class="flex flex-col space-y-1">
                            ${navLinks.map(link => `
                                <button 
                                    onclick="scrollToSection('${link.id}')"
                                    class="text-left text-sm font-bold uppercase tracking-widest py-3 px-4 hover:bg-orange-50 text-gray-700 rounded-xl transition-colors"
                                >
                                    ${link.name}
                                </button>
                            `).join('')}
                        </div>
                    </div>
                ` : ''}
            </header>
        `;

        const Hero = () => `
            <section class="relative z-10 min-h-screen flex flex-col justify-center items-center px-6 pt-32 pb-16">
                <div class="text-center max-w-4xl relative">
                    <div class="mx-auto mb-10 w-36 h-36 md:w-48 md:h-48 bg-orange-100 rounded-full flex items-center justify-center border-4 border-orange-300 shadow-xl">
                        <i data-lucide="user" class="text-orange-600" style="width: 80px; height: 80px;"></i>
                    </div>

                    <h2 class="text-gray-600 font-bold text-lg md:text-xl tracking-[0.1em] mb-4 uppercase">
                        3D Character & Avatar Design
                    </h2>
                    <h1 class="text-5xl md:text-7xl font-extrabold text-gray-900 mb-6 tracking-tighter leading-tight relative">
                        あなたの<span class="text-orange-500">３次元の夢</span>を形に
                    </h1>
                    <p class="text-gray-600 text-lg max-w-2xl mx-auto leading-relaxed mb-10 font-medium">
                        ハイクオリティなVtuberモデル、VRChatアバター制作をお手伝いします。
                        <br class="hidden md:block"/>
                        丁寧なモデリングと完璧なセットアップをお約束します。
                    </p>
                    
                    <div class="flex flex-col sm:flex-row gap-4 justify-center">
                        <button 
                            onclick="scrollToSection('works')"
                            class="group flex items-center justify-center gap-3 bg-gray-900 text-white px-8 py-3 rounded-full font-semibold text-lg hover:bg-gray-700 shadow-xl transition-all duration-300"
                        >
                            <span>制作実績を見る</span>
                            <i data-lucide="arrow-down" class="group-hover:translate-y-0.5 transition-transform" style="width: 20px; height: 20px;"></i>
                        </button>
                        <button 
                            onclick="scrollToSection('contact')"
                            class="flex items-center justify-center gap-2 text-gray-700 border border-gray-300 px-8 py-3 rounded-full font-semibold text-lg hover:bg-gray-100 transition-all duration-300"
                        >
                            <i data-lucide="mail" style="width: 20px; height: 20px;"></i>
                            <span>ご依頼・お問い合わせ</span>
                        </button>
                    </div>
                </div>
            </section>
        `;

        const About = () => `
            <section id="about" class="relative z-10 py-24 bg-white my-12 md:my-24 mx-4 md:mx-auto max-w-6xl rounded-[3rem] shadow-xl border border-white/50 px-8 md:px-16 overflow-hidden">
                <div class="absolute top-0 right-0 w-64 h-64 bg-orange-50 rounded-full -translate-y-1/2 translate-x-1/2 pointer-events-none"></div>
                <div class="relative">
                    <div class="flex flex-col md:flex-row gap-12 md:gap-16 items-center">
                        <div class="w-48 h-48 md:w-72 md:h-72 bg-orange-100 shrink-0 flex items-center justify-center rounded-full border-[6px] border-white shadow-xl overflow-hidden relative group">
                            <img 
                                src="${PROFILE_IMAGE_URL}" 
                                alt="Natorium_23 Profile" 
                                class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" 
                                onerror="this.onerror=null; this.src='https://placehold.co/400x400/EF4444/ffffff?text=Image+Error';"
                            />
                        </div>
                        
                        <div class="flex-1">
                            <div class="flex items-center gap-4 mb-8">
                                <div class="h-2 w-12 bg-orange-500 rounded-full"></div>
                                <h3 class="text-4xl font-black text-gray-900">ABOUT ME</h3>
                            </div>
                            <p class="text-gray-600 leading-loose mb-10 font-medium text-lg">
                                フリーランスの3DCGデザイナーとして活動しています。<br/>
                                主にBlenderやUnityを使用し、Vtuberモデルの制作からVRChat向けアバターのセットアップまで幅広く対応可能です。
                                キャラクターの魅力を最大限に引き出す「かわいい」「かっこいい」造形と、破綻のない丁寧なリギングを心がけています。
                            </p>
                            
                            <div class="grid grid-cols-1 gap-6 text-gray-600">
                                <div class="bg-orange-50/80 p-6 rounded-3xl border border-orange-100 shadow-sm">
                                    <span class="block text-orange-600 font-black text-sm uppercase mb-3 flex items-center gap-2">
                                        <i data-lucide="monitor" style="width: 16px; height: 16px;"></i> Main Tools
                                    </span>
                                    <span class="font-bold text-gray-800 text-lg leading-snug block">Blender, Unity,<br/>Substance Painter, Photoshop</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        `;

        const Works = () => `
            <section id="works" class="relative z-10 py-24 px-6 max-w-6xl mx-auto">
                <div class="flex flex-col items-center mb-16">
                    <h3 class="text-5xl font-black text-gray-900 mb-10 text-center relative inline-block">
                        WORKS
                        <span class="absolute -bottom-3 left-1/2 -translate-x-1/2 w-24 h-2 bg-orange-500 rounded-full"></span>
                    </h3>
                    
                    <div class="flex flex-wrap justify-center gap-3 bg-white p-2 rounded-full shadow-md border border-gray-100">
                        ${filterTabs.map(tab => `
                            <button
                                onclick="setActiveTab('${tab.id}')"
                                class="px-8 py-3 text-sm font-bold uppercase tracking-wider rounded-full transition-all ${
                                    activeTab === tab.id
                                        ? 'bg-orange-500 text-white shadow-md' 
                                        : 'text-gray-600 hover:bg-orange-50 hover:text-orange-600'
                                }"
                            >
                                ${tab.name}
                            </button>
                        `).join('')}
                    </div>
                </div>

                <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6 md:gap-8">
                    ${WORKS_DATA.filter(work => activeTab === 'all' || work.category === activeTab).map(work => `
                        <div 
                            onclick="openModal(${work.isPlaceholder ? 'null' : 'WORKS_DATA.find(w => w.id === ' + work.id + ')'})" 
                            class="group relative aspect-3-4 bg-white rounded-[2rem] overflow-hidden shadow-lg transition-all duration-300 border border-white/50 ${
                                work.isPlaceholder 
                                    ? 'cursor-default bg-gray-50'
                                    : 'cursor-pointer hover:shadow-2xl hover:-translate-y-2'
                            }"
                        >
                            <img 
                                src="${work.image}" 
                                alt="${work.title}" 
                                class="w-full h-full object-cover transition-transform duration-500 ${
                                    work.isPlaceholder ? 'opacity-50' : 'group-hover:scale-110 group-hover:rotate-1'
                                }"
                                onerror="this.onerror=null; this.src='https://placehold.co/400x533/EF4444/ffffff?text=Image+Error';"
                            />
                            
                            ${work.isPlaceholder ? `
                                <div class="absolute inset-0 flex flex-col items-center justify-center p-8 text-gray-500">
                                    <i data-lucide="clock" class="text-gray-400 mb-4" style="width: 48px; height: 48px;"></i>
                                    <h4 class="text-2xl font-black text-gray-600">${work.title}</h4>
                                    <p class="text-center text-sm mt-2">実績追加までしばらくお待ちください</p>
                                </div>
                            ` : `
                                <div class="absolute inset-0 bg-gradient-to-t from-gray-900/80 via-gray-900/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                                <div class="absolute bottom-0 left-0 w-full p-6 translate-y-8 group-hover:translate-y-0 transition-transform duration-500 ease-out">
                                    <span class="text-xs font-bold bg-white text-orange-500 px-3 py-1 mb-2 inline-block rounded-full uppercase shadow-sm tracking-wider">
                                        ${filterTabs.find(t => t.id === work.category)?.name || work.category}
                                    </span>
                                    <h4 class="text-xl font-black text-white drop-shadow-md">${work.title}</h4>
                                </div>
                                <div class="absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300 delay-100 scale-50 group-hover:scale-100">
                                    <div class="bg-white/30 backdrop-blur-md p-3 rounded-full shadow-sm hover:bg-white/50 transition-colors">
                                        <i data-lucide="external-link" class="text-white" style="width: 20px; height: 20px;"></i>
                                    </div>
                                </div>
                            `}
                        </div>
                    `).join('')}
                </div>
            </section>
        `;

        const Price = () => `
            <section id="price" class="relative z-10 py-24 bg-white my-12 md:my-24 mx-4 md:mx-auto max-w-6xl rounded-[3rem] shadow-xl border border-white/50 px-8 md:px-16 overflow-hidden">
                <div class="relative">
                    <div class="text-center mb-16">
                        <h3 class="text-5xl font-black text-gray-900 mb-4 relative inline-block">
                            PRICE
                            <span class="absolute -bottom-3 left-0 w-full h-2 bg-orange-500 rounded-full"></span>
                        </h3>
                        <p class="text-gray-600 mt-6 font-medium text-lg flex items-center justify-center gap-2">
                            <i data-lucide="dollar-sign" class="text-orange-500" style="width: 20px; height: 20px;"></i> 制作費用目安 (全て**税別**表示です)
                        </p>
                    </div>

                    <h4 class="text-2xl font-black text-gray-900 mb-6 border-b pb-2 border-orange-200 flex items-center gap-2">
                        <span class="text-orange-500">I.</span> ベース制作プラン
                    </h4>
                    <div class="space-y-6 max-w-3xl mx-auto mb-16">
                        ${pricingData.map(item => `
                            <div class="flex flex-col md:flex-row items-start md:items-center justify-between p-6 bg-gray-50 rounded-2xl border-l-4 border-orange-500 shadow-md transition-shadow hover:shadow-lg">
                                <div class="text-left mb-2 md:mb-0">
                                    <h4 class="text-xl font-bold text-gray-800">${item.item}</h4>
                                    <p class="text-sm text-gray-500 mt-1">${item.notes}</p>
                                </div>
                                <div class="text-right shrink-0">
                                    <p class="text-3xl font-black text-orange-600">
                                        ${formatPrice(item.price)}円〜
                                    </p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    
                    <h4 class="text-2xl font-black text-gray-900 mb-6 border-b pb-2 border-orange-200 flex items-center gap-2">
                        <span class="text-orange-500">II.</span> 追加オプション代
                    </h4>
                    <div class="space-y-6 max-w-3xl mx-auto">
                        ${optionalPricingData.map(item => `
                            <div class="flex flex-col md:flex-row items-start md:items-center justify-between p-6 bg-orange-50 rounded-2xl border-l-4 border-pink-500 shadow-md transition-shadow hover:shadow-lg">
                                <div class="text-left mb-2 md:mb-0">
                                    <h4 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                                        <i data-lucide="plus-circle" class="text-pink-500" style="width: 20px; height: 20px;"></i>
                                        ${item.item}
                                    </h4>
                                    <p class="text-sm text-gray-500 mt-1">${item.notes}</p>
                                </div>
                                <div class="text-right shrink-0">
                                    <p class="text-3xl font-black text-pink-600">
                                        ${formatPrice(item.price)}${item.unit}
                                    </p>
                                </div>
                            </div>
                        `).join('')}
                    </div>

                    <div class="mt-12 text-center text-gray-500 text-sm italic">
                        <p>* 上記は目安の料金です。デザインの複雑さ、パーツ数、リギングの精度により変動します。</p>
                        <p>* 詳細なご依頼内容に基づき、個別にお見積りを作成いたしますので、まずはお問い合わせください。</p>
                    </div>
                </div>
            </section>
        `;

        const Flow = () => `
            <section id="flow" class="relative z-10 py-24 bg-gradient-to-b from-orange-50 to-white my-12 md:my-24 mx-4 md:mx-auto max-w-6xl rounded-[3rem] border border-orange-100/50 shadow-xl px-8 md:px-16 overflow-hidden">
                <div class="absolute top-0 left-0 w-96 h-96 bg-orange-200/40 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2 pointer-events-none"></div>
                <div class="absolute bottom-0 right-0 w-96 h-96 bg-pink-200/40 rounded-full blur-3xl translate-x-1/2 translate-y-1/2 pointer-events-none"></div>

                <div class="relative">
                    <div class="text-center mb-20">
                        <h3 class="text-5xl font-black text-gray-900 mb-4 relative inline-block">
                            WORKFLOW
                            <span class="absolute -bottom-3 left-0 w-full h-2 bg-orange-500 rounded-full"></span>
                        </h3>
                        <p class="text-gray-600 mt-6 font-medium text-lg">ご依頼から納品までの楽しい道のり</p>
                    </div>

                    <div class="relative">
                        <div class="absolute left-8 md:left-1/2 top-0 bottom-0 w-2 bg-orange-100 rounded-full -ml-1 hidden md:block"></div>
                        <div class="absolute left-8 top-0 bottom-0 w-2 bg-orange-100 rounded-full -ml-1 md:hidden"></div>

                        <div class="space-y-16 md:space-y-24 py-8">
                            ${workflowSteps.map((item, index) => `
                                <div class="relative flex flex-col md:flex-row gap-8 items-center ${
                                    index % 2 === 0 ? 'md:flex-row-reverse' : ''
                                }">
                                    <div class="absolute left-8 md:left-1/2 -translate-x-1/2 w-20 h-20 bg-gradient-to-br from-orange-400 to-pink-500 border-[6px] border-white shadow-lg flex items-center justify-center rounded-full z-10 shrink-0">
                                        <i data-lucide="${item.icon}" class="text-white drop-shadow-sm" style="width: 24px; height: 24px;"></i>
                                    </div>
                                    <div class="w-full md:w-[calc(50%-4rem)] ${
                                        index % 2 === 0 ? 'md:text-left' : 'md:text-right'
                                    }">
                                        <div class="md:hidden flex items-center gap-3 text-orange-600 font-black mb-2">
                                            <div class="h-1 w-6 bg-orange-500 rounded-full"></div>
                                            <span>STEP ${item.step}</span>
                                        </div>
                                        <div class="p-6 bg-white border border-gray-100 rounded-3xl shadow-lg transition-all duration-300 hover:shadow-xl">
                                            <h4 class="text-3xl font-black text-gray-900 mb-3 leading-snug">
                                                ${item.title}
                                            </h4>
                                            <p class="text-gray-600 font-medium leading-relaxed">${item.desc}</p>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            </section>
        `;

        const Contact = () => `
            <section id="contact" class="relative z-10 py-24 bg-gradient-to-b from-orange-50 to-white mt-12 md:mt-24">
                <div class="max-w-4xl mx-auto px-6 text-center">
                    <div class="text-center mb-16">
                        <h3 class="text-5xl font-black text-gray-900 mb-4 relative inline-block">
                            CONTACT
                            <span class="absolute -bottom-3 left-0 w-full h-2 bg-orange-500 rounded-full"></span>
                        </h3>
                        <p class="text-gray-600 mt-6 font-medium text-lg">まずはフォームからお気軽にご相談ください</p>
                    </div>
                    
                    <div class="bg-white p-6 md:p-12 rounded-[2.5rem] shadow-2xl border-4 border-orange-500/20 max-w-2xl mx-auto relative overflow-hidden text-left">
                        <!-- 装飾用の光 -->
                        <div class="absolute top-0 right-0 w-24 h-24 bg-pink-300/50 rounded-full blur-2xl translate-x-1/4 -translate-y-1/4 pointer-events-none"></div>

                        <p class="text-gray-600 text-base leading-relaxed mb-6 font-medium">
                            ご依頼・ご質問は、以下のフォームより必要事項を入力の上、送信してください。
                            <br class="hidden sm:inline" />内容を確認後、担当者よりご連絡させていただきます。
                        </p>

                        <!-- メッセージ表示エリア -->
                        ${contactMessage.text ? `
                            <div id="messageBox" class="p-4 rounded-xl font-medium mb-6 transition duration-300 border border-current ${
                                contactMessage.type === 'success' ? 'bg-green-100 text-green-700 border-green-300' : 'bg-red-100 text-red-700 border-red-300'
                            }" role="alert">
                                ${contactMessage.text}
                            </div>
                        ` : ''}

                        <!-- お問い合わせフォーム -->
                        <form id="contactForm" onsubmit="handleSubmit(event)" class="space-y-6">
                            
                            <!-- お名前 (必須) -->
                            <div>
                                <label for="name" class="block text-sm font-bold text-gray-800 mb-1">お名前 <span class="text-red-500">*</span></label>
                                <input type="text" id="name" name="name" required
                                    class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition duration-150"
                                    placeholder="山田 太郎">
                            </div>

                            <!-- メールアドレス (必須) -->
                            <div>
                                <label for="email" class="block text-sm font-bold text-gray-800 mb-1">メールアドレス <span class="text-red-500">*</span></label>
                                <input type="email" id="email" name="email" required
                                    class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition duration-150"
                                    placeholder="example@domain.com">
                            </div>

                            <!-- お問い合わせ種別のプルダウン (必須) -->
                            <div>
                                <label for="inquiryType" class="block text-sm font-bold text-gray-800 mb-1">お問い合わせ種別 <span class="text-red-500">*</span></label>
                                <select id="inquiryType" name="inquiryType" required
                                    class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition duration-150 appearance-none bg-white">
                                    <option value="" disabled selected>--- 選択してください ---</option>
                                    ${INQUIRY_OPTIONS.map(opt => `
                                        <option value="${opt.value}">${opt.label}</option>
                                    `).join('')}
                                </select>
                                <p class="text-xs text-gray-500 mt-1">最も近いご相談内容をお選びください。</p>
                            </div>

                            <!-- 詳細内容 (必須) -->
                            <div>
                                <label for="details" class="block text-sm font-bold text-gray-800 mb-1">詳細内容 <span class="text-red-500">*</span></label>
                                <textarea id="details" name="details" rows="5" required
                                    class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition duration-150"
                                    placeholder="具体的なご依頼内容（予算、納期、キャラクター設定など）をご記入ください。"></textarea>
                            </div>

                            <!-- 送信ボタン -->
                            <button type="submit"
                                class="w-full flex justify-center py-4 px-4 border border-transparent rounded-full shadow-lg text-lg font-bold text-white bg-orange-500 hover:bg-orange-600 focus:outline-none focus:ring-4 focus:ring-orange-300 transition duration-200 ease-in-out transform hover:scale-[1.01] active:scale-[0.99] mt-8">
                                <i data-lucide="send" class="mr-3" style="width: 20px; height: 20px;"></i>
                                <span>送信する</span>
                            </button>
                        </form>
                        
                        <div class="mt-8 pt-6 border-t border-gray-100 text-center">
                            <h4 class="text-sm font-bold text-gray-500 uppercase mb-3 flex items-center justify-center gap-2">
                                <i data-lucide="info" style="width: 16px; height: 16px;"></i> 注意事項
                            </h4>
                            <p class="text-sm text-gray-500 italic">
                                * 返信には通常2～3営業日いただいております。<br>
                                * 営業目的のお問い合わせはご遠慮ください。
                            </p>
                        </div>
                    </div>
                </div>
            </section>
        `;

        const Footer = () => `
            <footer class="bg-gray-800 text-gray-400 py-10 px-6">
                <div class="max-w-6xl mx-auto flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0">
                    <div class="text-xl font-black tracking-wider text-white">
                        Natorium<span class="text-orange-500">_23</span>
                    </div>
                    <nav class="flex space-x-6">
                        ${navLinks.map(link => `
                            <button 
                                onclick="scrollToSection('${link.id}')"
                                class="text-sm hover:text-orange-400 transition-colors"
                            >
                                ${link.name}
                            </button>
                        `).join('')}
                    </nav>
                    <p class="text-sm">
                        &copy; 2024 Natorium_23 Portfolio. All Rights Reserved.
                    </p>
                </div>
            </footer>
        `;
        
        const WorkModal = () => {
            if (!selectedWork) return '';

            // 画像URLの選択ロジック
            let currentImageUrl;
            let mainImageClass = 'h-full w-full object-contain'; 
            
            if (activeModalImageKey === 'main') {
                currentImageUrl = selectedWork.image;
            } else if (activeModalImageKey === 'tpose') {
                currentImageUrl = selectedWork.imageTpose;
            } else {
                currentImageUrl = selectedWork.image; // デフォルト
            }

            return `
                <div class="fixed inset-0 bg-gray-900 bg-opacity-80 z-[100] flex items-center justify-center p-4 md:p-8" onclick="closeModal()">
                    <div class="bg-white rounded-3xl shadow-2xl max-w-5xl w-full h-full max-h-[90vh] overflow-hidden flex flex-col transition-all duration-300" onclick="event.stopPropagation()">
                        
                        <!-- Header -->
                        <div class="flex justify-between items-center p-6 border-b border-gray-100 shrink-0">
                            <h3 class="text-2xl md:text-3xl font-black text-gray-900">${selectedWork.title}</h3>
                            <button onclick="closeModal()" class="text-gray-500 hover:text-gray-800 transition-colors bg-gray-100 p-2 rounded-full">
                                <i data-lucide="x" style="width: 24px; height: 24px;"></i>
                            </button>
                        </div>
                        
                        <!-- Content -->
                        <div class="flex-1 overflow-y-auto p-4 md:p-8 grid grid-cols-1 md:grid-cols-3 gap-8">
                            
                            <!-- Image Column -->
                            <div class="md:col-span-2 flex flex-col">
                                <!-- Main Display Image (Big) -->
                                <div class="bg-gray-100 rounded-2xl flex-1 overflow-hidden p-2 mb-4 h-full relative">
                                    <img 
                                        src="${currentImageUrl}" 
                                        alt="${selectedWork.title} - ${activeModalImageKey === 'main' ? 'メイン' : 'Tポーズ'}" 
                                        class="${mainImageClass} w-full h-full"
                                        onerror="this.onerror=null; this.src='https://placehold.co/800x1066/EF4444/ffffff?text=Image+Error';"
                                    />
                                </div>

                                <!-- Thumbnails (Small for switching) - 画像サイズ調整の修正箇所 -->
                                <div class="flex gap-4 justify-center shrink-0">
                                    <!-- Main Image Thumbnail -->
                                    <button 
                                        onclick="setActiveModalImage('main')"
                                        class="w-24 h-32 relative rounded-xl overflow-hidden shadow-md transition-all duration-200 border-2 ${activeModalImageKey === 'main' ? 'border-orange-500 scale-105' : 'border-gray-200 hover:border-orange-300'}"
                                    >
                                        <img 
                                            src="${selectedWork.image}" 
                                            alt="メイン画像" 
                                            class="w-full h-full object-cover opacity-70"
                                        />
                                        <div class="absolute inset-0 flex items-center justify-center bg-gray-900/40 text-white font-bold text-xs uppercase">
                                            MAIN
                                        </div>
                                    </button>

                                    <!-- T-Pose Image Thumbnail -->
                                    ${selectedWork.imageTpose ? `
                                        <button 
                                            onclick="setActiveModalImage('tpose')"
                                            class="w-24 h-32 relative rounded-xl overflow-hidden shadow-md transition-all duration-200 border-2 ${activeModalImageKey === 'tpose' ? 'border-orange-500 scale-105' : 'border-gray-200 hover:border-orange-300'}"
                                        >
                                            <img 
                                                src="${selectedWork.imageTpose}" 
                                                alt="Tポーズ画像" 
                                                class="w-full h-full object-cover opacity-70"
                                            />
                                            <div class="absolute inset-0 flex items-center justify-center bg-gray-900/40 text-white font-bold text-xs uppercase">
                                                T-POSE
                                            </div>
                                        </button>
                                    ` : ''}
                                </div>
                            </div>
                            
                            <!-- Detail Column -->
                            <div class="md:col-span-1">
                                <h4 class="text-xl font-bold text-orange-500 mb-2">DETAIL</h4>
                                <p class="text-gray-600 mb-6 leading-relaxed">${selectedWork.description}</p>
                                
                                <h4 class="text-xl font-bold text-orange-500 mb-2 mt-6">SPECS & TOOLS</h4>
                                <ul class="space-y-2 mb-8">
                                    ${selectedWork.specs.map(spec => `
                                        <li class="flex items-center gap-2 text-gray-700 bg-gray-50 p-3 rounded-xl border border-gray-100">
                                            <i data-lucide="check-circle" class="text-green-500 shrink-0" style="width: 18px; height: 18px;"></i>
                                            <span class="font-medium">${spec}</span>
                                        </li>
                                    `).join('')}
                                </ul>

                                <a 
                                    href="${selectedWork.link}" 
                                    target="_blank" 
                                    rel="noopener noreferrer"
                                    class="w-full flex items-center justify-center gap-3 bg-orange-500 text-white px-6 py-3 rounded-full font-semibold text-lg hover:bg-orange-600 transition-colors shadow-lg mt-8"
                                >
                                    <span>関連リンクを見る</span>
                                    <i data-lucide="external-link" style="width: 20px; height: 20px;"></i>
                                </a>
                            </div>
                        </div>

                    </div>
                </div>
            `;
        };


        // ====================================================================
        // Render Function
        // ====================================================================

        const renderApp = () => {
            const root = document.getElementById('root');
            if (!root) return;

            root.innerHTML = `
                ${Header()}
                <main>
                    ${Hero()}
                    ${About()}
                    ${Works()}
                    ${Price()}
                    ${Flow()}
                    ${Contact()}
                </main>
                ${Footer()}
                ${WorkModal()}
            `;
            // Lucideアイコンを再作成（動的に追加されたHTML要素に対応）
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        };

        // Initialize the application
        window.onload = renderApp;
    </script>
</body>
</html>
